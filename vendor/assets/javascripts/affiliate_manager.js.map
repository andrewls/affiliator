{"version":3,"sources":["../../../src/affiliate_manager.js"],"names":["transformers","AffiliateManager","affiliates","noop","affiliateName","affiliateInformation","link","match","affiliate","getAffiliateForLink","transform"],"mappings":";;;;;;;;AAAA;;;;AACA;;;;;;;;AAEA,IAAIA,eAAe;AAClB;AADkB,CAAnB;;IAIMC,gB;AACL,6BAAc;AAAA;;AACb,OAAKC,UAAL,GAAkB;AACjBC,SAAM;AADW,GAAlB;AAGA;;;;+BAEYC,a,EAAwC;AAAA,qCAAtBC,oBAAsB;AAAtBA,wBAAsB;AAAA;;AACpD,QAAKH,UAAL,CAAgBE,aAAhB,uCAAqCJ,aAAaI,aAAb,CAArC,gBAAoEC,oBAApE;AACA;;;sCAEmBC,I,EAAM;AACzB,OAAIA,KAAKC,KAAL,CAAW,kBAAX,KAAkC,KAAKL,UAAL,CAAgB,QAAhB,CAAtC,EAAiE,OAAO,QAAP,CAAjE,KACK,OAAO,MAAP;AACL;;;gCAEaI,I,EAAM;AACnB,OAAIE,YAAY,KAAKC,mBAAL,CAAyBH,IAAzB,CAAhB;AACA,UAAO,KAAKJ,UAAL,CAAgB,KAAKO,mBAAL,CAAyBH,IAAzB,CAAhB,EAAgDI,SAAhD,CAA0DJ,IAA1D,CAAP;AACA;;;;;;kBAGaL,gB","file":"affiliate_manager.js","sourcesContent":["import AmazonTransformer from './amazon_transformer'\nimport NoopTransformer from './noop_transformer'\n\nlet transformers = {\n\t'amazon': AmazonTransformer\n}\n\nclass AffiliateManager {\n\tconstructor() {\n\t\tthis.affiliates = {\n\t\t\tnoop: new NoopTransformer()\n\t\t}\n\t}\n\n\taddAffiliate(affiliateName, ...affiliateInformation) {\n\t\tthis.affiliates[affiliateName] = new transformers[affiliateName](...affiliateInformation)\n\t}\n\n\tgetAffiliateForLink(link) {\n\t\tif (link.match(/^.*amazon.com.*/g) && this.affiliates['amazon']) return 'amazon'\n\t\telse return 'noop'\n\t}\n\n\ttransformLink(link) {\n\t\tlet affiliate = this.getAffiliateForLink(link)\n\t\treturn this.affiliates[this.getAffiliateForLink(link)].transform(link)\n\t}\n}\n\nexport default AffiliateManager;\n"]}